{"version":3,"file":"login.page.js","sourceRoot":"","sources":["../../../../Volumes/Data/OElite/cosmos/public/OEme/tmp/broccoli_type_script_compiler-input_base_path-7nMsUUjz.tmp/0/src/app/views/pages/login/login.page.ts"],"names":[],"mappings":"AAAA;;GAEG;;;;;;;;;;;AAEH,qBAAmC,eAAe,CAAC,CAAA;AAEnD,2BAAyB,oCAAoC,CAAC,CAAA;AAC9D,uBAAqB,iBAAiB,CAAC,CAAA;AACvC,+BAA4B,iDAAiD,CAAC,CAAA;AAC9E,yBAA8C,4CAA4C,CAAC,CAAA;AAY3F;IA2BI,mBAAY,QAAmB,EAAU,MAAa,EAAU,aAA2B;QA3B/F,iBAyDC;QA9B4C,WAAM,GAAN,MAAM,CAAO;QAAU,kBAAa,GAAb,aAAa,CAAc;QAxB3F,aAAQ,GAAY;YAChB,kCAAkC;YAClC,kCAAkC;YAClC,kCAAkC;YAClC,kCAAkC;YAClC,kCAAkC;YAClC,kCAAkC;YAClC,kCAAkC;YAClC,kCAAkC;YAClC,kCAAkC;YAClC,kCAAkC;SACrC,CAAC;QAEM,UAAK,GAAU,IAAI,CAAC;QACpB,aAAQ,GAAU,IAAI,CAAC;QACvB,cAAS,GAAU,IAAI,CAAC;QACxB,qBAAgB,GAAU,SAAS,CAAC;QACpC,kBAAa,GAAU,SAAS,CAAC;QACjC,gBAAW,GAAW,KAAK,CAAC;QAC5B,iBAAY,GAAW,KAAK,CAAC;QAMjC,kBAAkB;QAClB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;QAC/E,MAAM,CAAC,WAAW,CAAC,WAAW,CAAC,SAAS,CAAC,UAAA,MAAM;YAC3C,KAAI,CAAC,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,CAAC;YACrC,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,SAAS,CAAC;gBAChB,KAAI,CAAC,SAAS,GAAG,GAAG,CAAC;QAC7B,CAAC,CAAC,CAAC;IACP,CAAC;IAGD,4BAAQ,GAAR;QAAA,iBAiBC;QAhBG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;YAC7D,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACT,KAAI,CAAC,MAAM,CAAC,aAAa,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC;YAC9C,CAAC;YACD,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,IAAI,KAAK,CAAC,CAAC,CAAC;gBACvB,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,6BAAkB,CAAC,gEAAgE,CAAC,CAAC,CAAC;gBACpH,CAAC,CAAC,qBAAqB,CAAC,CAAC,KAAK,EAAE,CAAC;YACrC,CAAC;YACD,IAAI,CAAC,CAAC;gBACF,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,6BAAkB,CAAC,qEAAqE,CAAC,CAAC,CAAC;YAC7H,CAAC;QACL,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;IAE9B,CAAC;IAtDa,sBAAY,GAAU,uBAAuB,CAAC;IAuB5D;QAAC,gBAAS,CAAC,sBAAW,CAAC;;sDAAA;IA/B3B;QAAC,gBAAS,CAAC;YACP,QAAQ,EAAE,MAAM,CAAC,EAAE;YACnB,QAAQ,EAAE,SAAS,CAAC,YAAY;YAChC,WAAW,EAAE,iBAAiB;YAC9B,SAAS,EAAE,CAAC,WAAW,CAAC;SAC3B,CAAC;;iBAAA;IA2DF,gBAAC;AAAD,CAAC,AAzDD,IAyDC;AAzDY,iBAAS,YAyDrB,CAAA","sourcesContent":["/**\n * Created by mleader1 on 29/06/2016.\n */\n\nimport {Component, ViewChild} from \"@angular/core\";\nimport {SimpleMasterPage} from \"../../masterpages/simple/simple.masterpage\";\nimport {OEAppState} from \"../../../core/framework/OEAppState\";\nimport {Router} from \"@angular/router\";\nimport {SignInService} from \"../../../core/abstractions/users/signin.service\";\nimport {MdlSnackbar, MdlSnackbarMessage} from \"../../../plugins/mdl/mdl-snackbar/snackbar\";\nimport checkedNodeCall = webdriver.promise.checkedNodeCall;\n\ndeclare var $:any;\n\n@Component({\n    moduleId: module.id,\n    selector: LoginPage.viewSelector,\n    templateUrl: 'login.page.html',\n    styleUrls: ['login.css']\n})\n\nexport class LoginPage  {\n    public static viewSelector:string = 'oe-page.oe-page-login';\n    loginBg:string;\n    loginBgs:string[] = [\n        '../../../../assets/img/bg/01.jpg',\n        '../../../../assets/img/bg/02.jpg',\n        '../../../../assets/img/bg/03.jpg',\n        '../../../../assets/img/bg/04.jpg',\n        '../../../../assets/img/bg/05.jpg',\n        '../../../../assets/img/bg/06.jpg',\n        '../../../../assets/img/bg/07.jpg',\n        '../../../../assets/img/bg/08.jpg',\n        '../../../../assets/img/bg/09.jpg',\n        '../../../../assets/img/bg/10.jpg'\n    ];\n\n    private email:string = null;\n    private password:string = null;\n    private returnUrl:string = null;\n    private txtPasswordColor:string = 'primary';\n    private txtEmailColor:string = 'primary';\n    private loginFailed:boolean = false;\n    private isValidating:boolean = false;\n\n    @ViewChild(MdlSnackbar)\n    private notificationBar:MdlSnackbar;\n\n    constructor(appState:OEAppState, private router:Router, private signinService:SignInService) {\n        //super(appState);\n        this.loginBg = this.loginBgs[Math.floor(Math.random() * this.loginBgs.length)];\n        router.routerState.queryParams.subscribe(params=> {\n            this.returnUrl = params['returnUrl'];\n            if (!this.returnUrl)\n                this.returnUrl = \"/\";\n        });\n    }\n\n\n    onSubmit():void {\n        this.isValidating = true;\n        this.signinService.SignIn(this.email, this.password).then((result)=> {\n            if (result) {\n                this.router.navigateByUrl(this.returnUrl);\n            }\n            else if (result == false) {\n                this.loginFailed = true;\n                this.notificationBar.push(new MdlSnackbarMessage(\"Sorry, incorrect username/email or password. Please try again.\"));\n                $('input[name=\"email\"]').focus();\n            }\n            else {\n                this.notificationBar.push(new MdlSnackbarMessage(\"Sorry, an error has occurred on the server. Please try again later.\"));\n            }\n        });\n        this.isValidating = false;\n\n    }\n\n}"]}